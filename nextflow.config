manifest {
    description = 'Spectral Library generation of OSW analysis. Adapted from original work by George Rosenberger.'
    author = 'Patrick Pedrioli'
}

params {
    // General parameters
    help = false	// Show help
    dda_folder = 'Data/DDA'	// Path to DDA files
    dia_folder = 'Data/DIA'	// Path to DIA files
    protein_db = 'Results/Databases/proteome.fasta'	// Protein database to search against
    unimod = 'Params/unimod.xml'	// Unimod modifications file
    
    // DIA-Umpire parameters
    diau_threads = 28	// # threads to use for DIA-Umpire SE
    diau_se_params = 'Params/diaumpire_thermo_lib_se.params'	// DIA-Umpire parameter file for SE

    // Comet parameters
    comet_threads = 28
    comet_params = 'Params/comet.params'

    // TPP parameters
    peptideProphet_params = "ACCMASS PPM NONPARAM DECOYPROBS LEAVE PI"	// PeptideProphet parameters
    decoy = "DECOY_"
    iprophet_threads = 8    
    
    // easypqp library generation parameters
    easypqp_pi0_lambda = "0.1 0.5 0.05"	// pi0 lamdba interval for library generation
//    easypqp_pi0_lambda = "0.05 0.2 0.05"	// pi0 lamdba interval for library generation
    		       	       	   		// [default: 0.1, 0.5, 0.05]
    easypqp_psm_fdr_threshold = 0.01		// PSM FDR for library generation
       			      			// [default: 0.1]
    easypqp_peptide_fdr_threshold = 0.01	// peptide FDR for library generation
       			      			// [default: 0.1]
    easypqp_protein_fdr_threshold = 0.01	// protein FDR for library generation
       			      			// [default: 0.1]
    easypqp_rt_lowess_fraction = 0.05		// lowess fraction for library generation						
//    easypqp_rt_lowess_fraction = 0.1		// lowess fraction for library generation
    			      			// [default: 0.05]

    // oswAssayGeneartor parameters
    oswAssayGenerator_mode = 'OSW'			// OSW or IPF
    oswAssayGenerator_product_lower_mz_limit = 300	// low m/z boundary for library inclusion
    					       		// [default: 350.00]
    oswAssayGenerator_precursor_upper_mz_limit = 1800	// high m/z boundary for library inclusion
    					       		// [default: 2000.00]
    oswAssayGenerator_min_transitions = 6		// min number of transitions for library inclusion
    					       		// [default: 6]    
    oswAssayGenerator_max_transitions = 6		// max number of transitions for library inclusion
    					       		// [default: 6]
}


process{
    withName:diaUmpire {
    //	container = 'quay.io/biocontainers/dia_umpire:2.1.3--1'
    //	container = 'biocontainers/dia-umpire:v2.1.2_cv4'
    	container = 'grosenberger/dia_umpire:2.1.6'
    }
    withName:mgf2mzxml {
	container = 'digitalproteomes/tpp:version-5.2.0.1'
    }
    withName:cometSearch {
	container = 'digitalproteomes/comet:version-2019015'
    }
    withName:peptideProphet {
	container = 'digitalproteomes/tpp:version-5.2.0.1'
    }
    withName:iProphet {
	container = 'digitalproteomes/tpp:version-5.2.0.1'
    }
    withName:easypqpConvert {
	container = 'grosenberger/easypqp:0.1.8'
    }
    withName:proteinProphet {
	container = 'digitalproteomes/tpp:version-5.2.0.1'
    }
    withName:easypqpRT {
	container = 'grosenberger/easypqp:0.1.8'
    }
    withName:oswAssayGeneratorRT {
	container = 'grosenberger/openms:2.5.0'
   }
    withName:easypqp {
	container = 'grosenberger/easypqp:0.1.8'
    }
   withName:globalTargetPqp {
	container = 'grosenberger/openms:2.5.0'
   }    
   withName:oswAssayGenerator {
	container = 'grosenberger/openms:2.5.0'
   }
   withName:oswDecoyGenerator {
	container = 'grosenberger/openms:2.5.0'
  }
}

docker {
    enabled = true
    sudo = true
    runOptions = '-e LOCAL_USER_ID=$(id -u) -u $(id -u):$(id -g)'
}

executor {
     name = 'local'
     cpus = 29
     memory = '50 GB'
}
